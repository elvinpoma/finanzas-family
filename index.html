<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FamilyWealth Cyber | Native</title>
    
    <style>
        :root {
            --bg: #09090b;
            --surface: #18181b;
            --surface-light: #27272a;
            --primary: #7c3aed;
            --primary-glow: rgba(124, 58, 237, 0.4);
            --text-main: #ffffff;
            --text-muted: #a1a1aa;
            --success: #10b981;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        
        body {
            background-color: var(--bg);
            color: var(--text-main);
            padding-bottom: 80px; /* Espacio para el menú inferior */
            min-height: 100vh;
        }

        /* ATMÓSFERA */
        .ambient-light {
            position: fixed; top: -20vh; left: 50%; transform: translateX(-50%);
            width: 100vw; height: 60vh;
            background: radial-gradient(circle, rgba(124,58,237,0.15) 0%, rgba(9,9,11,0) 70%);
            pointer-events: none; z-index: -1;
        }

        .container { max-width: 600px; margin: 0 auto; padding: 20px; }

        /* HEADER */
        header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
        .logo-area { display: flex; align-items: center; gap: 12px; }
        .logo-box { 
            width: 40px; height: 40px; 
            background: linear-gradient(135deg, #7c3aed, #4f46e5); 
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 15px var(--primary-glow);
        }
        .user-avatar { width: 35px; height: 35px; background: #333; border-radius: 50%; border: 1px solid #555; overflow: hidden; }
        .user-avatar img { width: 100%; height: 100%; object-fit: cover; }

        /* TARJETAS (Glassmorphism) */
        .card {
            background: rgba(24, 24, 27, 0.7);
            backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 20px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .card-title {
            color: var(--text-muted); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; font-weight: 700; margin-bottom: 10px; display: flex; align-items: center; gap: 8px;
        }

        /* TEXTOS GRANDES */
        .big-number { font-size: 42px; font-weight: 800; letter-spacing: -1px; margin-bottom: 10px; }
        .badge { 
            display: inline-block; padding: 4px 12px; border-radius: 20px; 
            font-size: 12px; font-weight: bold; background: rgba(16, 185, 129, 0.1); color: var(--success); border: 1px solid rgba(16, 185, 129, 0.2);
        }

        /* LISTAS */
        .list-item { display: flex; justify-content: space-between; align-items: center; padding: 12px 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .list-item:last-child { border-bottom: none; }
        .item-left { display: flex; align-items: center; gap: 12px; }
        .icon-box { 
            width: 36px; height: 36px; background: var(--surface-light); border-radius: 10px; 
            display: flex; align-items: center; justify-content: center; color: var(--primary);
        }

        /* INPUTS PARA SIMULADOR */
        .input-group { margin-bottom: 15px; }
        label { display: block; color: var(--text-muted); font-size: 12px; margin-bottom: 5px; text-transform: uppercase; }
        input[type="number"], input[type="range"] {
            width: 100%; background: #0f0f12; border: 1px solid #333; color: white; padding: 12px; border-radius: 10px; font-size: 16px; outline: none; transition: 0.3s;
        }
        input:focus { border-color: var(--primary); box-shadow: 0 0 10px var(--primary-glow); }

        /* GRÁFICO BARRAS CSS */
        .chart-container { display: flex; align-items: flex-end; height: 120px; gap: 4px; padding-top: 20px; border-bottom: 1px solid #333; }
        .bar { flex: 1; background: var(--surface-light); border-radius: 4px 4px 0 0; transition: height 0.5s ease; position: relative; }
        .bar:hover { background: var(--primary); }

        /* NAVEGACIÓN INFERIOR */
        .dock {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(15px);
            padding: 8px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1);
            display: flex; gap: 10px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); z-index: 100;
        }
        .dock-btn {
            background: none; border: none; padding: 12px; border-radius: 14px; cursor: pointer; color: #666; transition: 0.3s;
        }
        .dock-btn.active { background: var(--primary); color: white; box-shadow: 0 0 15px var(--primary-glow); }
        .dock-btn svg { width: 24px; height: 24px; stroke-width: 2; }

        /* UTILIDADES VISUALIZACIÓN */
        .hidden { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    </style>
</head>
<body>

    <div class="ambient-light"></div>

    <div class="container">
        
        <header>
            <div class="logo-area">
                <div class="logo-box">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path></svg>
                </div>
                <div>
                    <h1 style="font-size: 18px; font-weight: 700;">FamilyWealth</h1>
                    <p style="font-size: 11px; color: var(--primary); letter-spacing: 1px;">CYBER OS</p>
                </div>
            </div>
            <div class="user-avatar">
                <svg width="35" height="35" viewBox="0 0 24 24" fill="#222" stroke="none"><circle cx="12" cy="12" r="12"/></svg>
            </div>
        </header>

        <main id="view-dashboard" class="fade-in">
            <div class="card" style="text-align: center; position: relative; overflow: hidden;">
                <div class="card-title" style="justify-content: center;">PATRIMONIO NETO</div>
                <div class="big-number">148.250€</div>
                <div class="badge">▲ +4.2% ESTE MES</div>
            </div>

            <div class="card">
                <div class="card-title">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path><path d="M22 12A10 10 0 0 0 12 2v10z"></path></svg>
                    DESGLOSE DE ACTIVOS
                </div>
                
                <div class="list-item">
                    <div class="item-left">
                        <div class="icon-box"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="1" y="4" width="22" height="16" rx="2" ry="2"></rect><line x1="1" y1="10" x2="23" y2="10"></line></svg></div>
                        <div>
                            <div style="font-weight: 600;">Cuenta Principal</div>
                            <div style="font-size: 11px; color: #666;">EFECTIVO</div>
                        </div>
                    </div>
                    <div style="font-family: monospace; font-weight: 700;">12.450€</div>
                </div>

                <div class="list-item">
                    <div class="item-left">
                        <div class="icon-box" style="color: orange;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.279 5.343m-4.221 5.485L9.99 11.838"></path></svg></div>
                        <div>
                            <div style="font-weight: 600;">Bitcoin Cold Wallet</div>
                            <div style="font-size: 11px; color: #666;">CRYPTO</div>
                        </div>
                    </div>
                    <div style="font-family: monospace; font-weight: 700;">35.000€</div>
                </div>

                <div class="list-item">
                    <div class="item-left">
                        <div class="icon-box" style="color: #10b981;"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="1" x2="12" y2="23"></line><path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></div>
                        <div>
                            <div style="font-weight: 600;">Fondo Indexado</div>
                            <div style="font-size: 11px; color: #666;">INVERSIÓN</div>
                        </div>
                    </div>
                    <div style="font-family: monospace; font-weight: 700;">100.800€</div>
                </div>
            </div>
        </main>

        <main id="view-simulator" class="hidden fade-in">
            <div class="card">
                <div class="card-title" style="color: var(--primary);">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="8" y2="6"></line><line x1="16" y1="6" x2="16" y2="6"></line><line x1="12" y1="6" x2="12" y2="6"></line><line x1="8" y1="10" x2="16" y2="10"></line><line x1="8" y1="14" x2="16" y2="14"></line><line x1="8" y1="18" x2="16" y2="18"></line></svg>
                    SIMULADOR HIPOTECA
                </div>
                
                <div class="input-group">
                    <label>Monto del Préstamo (€)</label>
                    <input type="number" id="sim-amount" value="250000">
                    <input type="range" id="range-amount" min="50000" max="1000000" step="5000" value="250000" style="margin-top: 10px; width:100%;">
                </div>

                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                    <div class="input-group">
                        <label>Plazo (Años)</label>
                        <input type="number" id="sim-years" value="25">
                    </div>
                    <div class="input-group">
                        <label>Interés (%)</label>
                        <input type="number" id="sim-rate" value="3.5" step="0.1" style="color: var(--primary); border-color: rgba(124,58,237,0.5);">
                    </div>
                </div>

                <div style="background: rgba(124,58,237,0.1); border: 1px solid rgba(124,58,237,0.2); border-radius: 12px; padding: 15px; text-align: center; margin-top: 10px;">
                    <div style="font-size: 12px; color: #aaa;">CUOTA MENSUAL ESTIMADA</div>
                    <div id="sim-result" style="font-size: 32px; font-weight: 800; color: white; font-family: monospace;">0.00€</div>
                </div>
            </div>

            <div class="card">
                <div class="card-title">AMORTIZACIÓN VISUAL</div>
                <div id="sim-chart" class="chart-container">
                    </div>
                <div style="display: flex; justify-content: space-between; font-size: 10px; color: #555; margin-top: 5px;">
                    <span>Año 1</span>
                    <span>Fin del plazo</span>
                </div>
            </div>
        </main>
    </div>

    <div class="dock">
        <button id="btn-dash" class="dock-btn active" onclick="switchTab('dashboard')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
        </button>
        <button id="btn-sim" class="dock-btn" onclick="switchTab('simulator')">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><rect x="4" y="2" width="16" height="20" rx="2"></rect><line x1="8" y1="6" x2="8" y2="6"></line><line x1="16" y1="6" x2="16" y2="6"></line><line x1="12" y1="6" x2="12" y2="6"></line><line x1="8" y1="10" x2="16" y2="10"></line></svg>
        </button>
    </div>

    <script>
        // --- 1. LÓGICA DE NAVEGACIÓN ---
        function switchTab(tab) {
            // Ocultar todas las vistas
            document.getElementById('view-dashboard').classList.add('hidden');
            document.getElementById('view-simulator').classList.add('hidden');
            
            // Quitar clase activa de botones
            document.getElementById('btn-dash').classList.remove('active');
            document.getElementById('btn-sim').classList.remove('active');

            // Activar seleccionada
            if(tab === 'dashboard') {
                document.getElementById('view-dashboard').classList.remove('hidden');
                document.getElementById('btn-dash').classList.add('active');
            } else {
                document.getElementById('view-simulator').classList.remove('hidden');
                document.getElementById('btn-sim').classList.add('active');
                calculateMortgage(); // Recalcular al entrar
            }
        }

        // --- 2. LÓGICA DEL SIMULADOR ---
        const inputs = ['sim-amount', 'sim-years', 'sim-rate', 'range-amount'];
        
        // Event Listeners
        inputs.forEach(id => {
            const el = document.getElementById(id);
            if(el) el.addEventListener('input', (e) => {
                // Sincronizar slider con input numérico
                if(e.target.id === 'range-amount') document.getElementById('sim-amount').value = e.target.value;
                if(e.target.id === 'sim-amount') document.getElementById('range-amount').value = e.target.value;
                calculateMortgage();
            });
        });

        function calculateMortgage() {
            const P = parseFloat(document.getElementById('sim-amount').value);
            const years = parseFloat(document.getElementById('sim-years').value);
            const annualRate = parseFloat(document.getElementById('sim-rate').value);

            if (!P || !years || !annualRate) return;

            const r = annualRate / 100 / 12;
            const n = years * 12;

            // Fórmula Cuota Fija
            const monthly = (P * r * Math.pow(1 + r, n)) / (Math.pow(1 + r, n) - 1);
            
            // Actualizar Texto
            document.getElementById('sim-result').innerText = monthly.toFixed(2) + '€';

            // Generar Gráfico
            renderChart(P, r, n, monthly);
        }

        function renderChart(principal, rate, months, payment) {
            const chart = document.getElementById('sim-chart');
            chart.innerHTML = ''; // Limpiar
            
            let balance = principal;
            const barsCount = 20; // Número de barras a mostrar
            const step = Math.floor(months / barsCount);

            for (let i = 0; i < barsCount; i++) {
                // Calcular balance en este punto
                // B = P * ((1+r)^n - (1+r)^p) / ((1+r)^n - 1)  (Aproximado para visualización rápida)
                
                // Simulación iterativa simplificada para el gráfico
                for(let m=0; m<step; m++) {
                    balance = balance * (1 + rate) - payment;
                }
                if(balance < 0) balance = 0;

                const heightPercent = (balance / principal) * 100;
                
                const bar = document.createElement('div');
                bar.className = 'bar';
                bar.style.height = `${heightPercent}%`;
                chart.appendChild(bar);
            }
        }

        // Cálculo inicial
        document.addEventListener('DOMContentLoaded', () => {
            calculateMortgage();
        });

    </script>
</body>
</html>
